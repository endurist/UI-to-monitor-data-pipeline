{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Project/2021SpringTeam04-LAS1/dpmonitor/src/components/Scripts.js\";\nimport React, { Component } from 'react';\nimport Editor from './Editor';\nimport ScriptList from './ScriptList';\nimport './Scripts.css';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport Form from 'react-bootstrap/Form';\nimport { AiFillCopy } from 'react-icons/ai';\nimport { IconContext } from 'react-icons/lib';\nimport ReactTooltip from 'react-tooltip';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Scripts extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClose = () => this.setState({\n      showModal: false\n    });\n\n    this.handleShow = () => this.setState({\n      showModal: true\n    });\n\n    this.state = {\n      // Will need a GET request here to fetch script list\n      // Temporarily using scripts array\n      scripts: [{\n        id: 1,\n        name: 'Sponsor Script',\n        value: `import sys\nimport pandas as pd\n\ndef ctry_any_actor(ctry:str)->int: \n    return df[(df['Actor1Geo'] == ctry) | \n    (df['Actor2Geo'] == ctry)]['Frequency'].sum()\n\ndf = pd.read_csv(sys.argv[1])\n\ntotal_articles = df['Frequency'].sum()\nabout_usa = ctry_any_actor('US')\n\ncountry_set = sorted(set(df['Actor1Geo']) | \nset(df['Actor2Geo']))\nfor ctry in country_set: \n    cnt = ctry_any_actor(ctry)\n    print('%2s: %5.2f' % (ctry, cnt * 100.0 / \n        total_articles))`\n      }, {\n        id: 2,\n        name: 'Hello World',\n        value: `def hello():\n    print('Hello World!')\n    \nhello()`\n      }, {\n        id: 3,\n        name: 'My Team Is',\n        value: `team = \"Team 4 - LAS 1\"\nprint(\"My team is \" + name)`\n      }, {\n        id: 4,\n        name: 'Empty Script',\n        value: ''\n      }],\n      selectedScriptIndex: 0,\n      showModal: false,\n      formValue: '',\n      copyStatus: 'Copy'\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.renderEditor = this.renderEditor.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.handleShow = this.handleShow.bind(this);\n    this.generateURL = this.generateURL.bind(this);\n    this.handleCopyURL = this.handleCopyURL.bind(this);\n    this.updateCopyStatus = this.updateCopyStatus.bind(this);\n    this.updateEditorValue = this.updateEditorValue.bind(this);\n  }\n\n  handleClick(e) {\n    let nodes = Array.prototype.slice.call(e.currentTarget.children);\n    let index = nodes.indexOf(e.target);\n    this.setState({\n      selectedScriptIndex: index\n    });\n  }\n\n  renderEditor(selectedScript) {\n    return /*#__PURE__*/_jsxDEV(Editor, {\n      className: \"editor\",\n      editorValue: selectedScript.value,\n      updateEditorValue: this.updateEditorValue\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this);\n  }\n\n  updateEditorValue(newValue) {\n    let scripts = [...this.state.scripts]; // 2. Make a shallow copy of the item you want to mutate\n\n    let script = { ...scripts[this.state.selectedScriptIndex],\n      value: newValue\n    };\n    scripts[this.state.selectedScriptIndex] = script;\n    this.setState({\n      scripts\n    });\n  }\n\n  handleCopyURL() {\n    this.setState({\n      copyStatus: 'Copied!'\n    });\n    navigator.clipboard.writeText(`https://API/receive_data/${this.state.scripts[this.state.selectedScriptIndex].id}`);\n  }\n\n  updateCopyStatus() {\n    this.setState({\n      copyStatus: 'Copy'\n    });\n  } // Runs after user submits form for creating new script and entering\n  // script name.\n  // Here we should call the create script api endpoint to send\n  // script name and get the new script id as well as the post url\n\n\n  generateURL(e) {\n    let newScript = {\n      id: Math.floor(Math.random() * Math.floor(50)),\n      name: this.state.formValue,\n      value: ''\n    };\n    const newScriptList = this.state.scripts.concat(newScript);\n    this.setState({\n      selectedScriptIndex: this.state.scripts.length\n    });\n    this.setState({\n      scripts: newScriptList\n    });\n    this.setState({\n      formValue: ''\n    });\n    this.handleClose();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scripts-page-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"editor-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"headings\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"label\",\n            children: \"POST data to:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            className: \"url\",\n            type: \"text\",\n            value: `https://API/receive_data/${this.state.scripts[this.state.selectedScriptIndex].id}`,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"copy-button\",\n            onClick: this.handleCopyURL,\n            \"data-for\": \"tooltip\",\n            \"data-tip\": true,\n            children: /*#__PURE__*/_jsxDEV(IconContext.Provider, {\n              value: {\n                style: {\n                  fontSize: '1.5em',\n                  color: 'black'\n                }\n              },\n              children: /*#__PURE__*/_jsxDEV(AiFillCopy, {\n                onClick: console.log('click')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(ReactTooltip, {\n            id: \"tooltip\",\n            place: \"right\",\n            effect: \"solid\",\n            getContent: () => this.state.copyStatus,\n            afterHide: this.updateCopyStatus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this), this.renderEditor(this.state.scripts[this.state.selectedScriptIndex])]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"script-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"headings\",\n          children: \"Scripts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"list-and-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(ScriptList, {\n            className: \"script-list\",\n            onScriptSelect: this.handleClick,\n            scriptList: this.state.scripts,\n            activeIndex: this.state.selectedScriptIndex\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"script-list-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              className: \"create-button\",\n              variant: \"outline-primary\",\n              onClick: this.handleShow,\n              children: \"Create New Script\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"rename-button\",\n              variant: \"outline-primary\",\n              children: \"Rename\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        show: this.state.showModal,\n        onHide: this.handleClose,\n        animation: true,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          closeButton: true,\n          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n            children: \"Create New Script\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n          children: /*#__PURE__*/_jsxDEV(Form, {\n            children: /*#__PURE__*/_jsxDEV(Form.Group, {\n              controlId: \"newScriptName\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Script Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"text\",\n                placeholder: \"Enter new script name\",\n                onChange: e => this.setState({\n                  formValue: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"secondary\",\n            onClick: this.handleClose,\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"primary\",\n            onClick: this.generateURL,\n            children: \"Generate Unique POST URL\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Scripts;","map":{"version":3,"sources":["/Users/mac/Project/2021SpringTeam04-LAS1/dpmonitor/src/components/Scripts.js"],"names":["React","Component","Editor","ScriptList","Button","Modal","Form","AiFillCopy","IconContext","ReactTooltip","Scripts","constructor","props","handleClose","setState","showModal","handleShow","state","scripts","id","name","value","selectedScriptIndex","formValue","copyStatus","handleClick","bind","renderEditor","generateURL","handleCopyURL","updateCopyStatus","updateEditorValue","e","nodes","Array","prototype","slice","call","currentTarget","children","index","indexOf","target","selectedScript","newValue","script","navigator","clipboard","writeText","newScript","Math","floor","random","newScriptList","concat","length","render","style","fontSize","color","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Editor from './Editor';\nimport ScriptList from './ScriptList';\nimport './Scripts.css';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport Form from 'react-bootstrap/Form';\nimport { AiFillCopy } from 'react-icons/ai';\nimport { IconContext } from 'react-icons/lib';\nimport ReactTooltip from 'react-tooltip';\n\nclass Scripts extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            // Will need a GET request here to fetch script list\n            // Temporarily using scripts array\n            scripts: [\n                {\n                    id: 1,\n                    name: 'Sponsor Script',\n                    value: `import sys\nimport pandas as pd\n\ndef ctry_any_actor(ctry:str)->int: \n    return df[(df['Actor1Geo'] == ctry) | \n    (df['Actor2Geo'] == ctry)]['Frequency'].sum()\n\ndf = pd.read_csv(sys.argv[1])\n\ntotal_articles = df['Frequency'].sum()\nabout_usa = ctry_any_actor('US')\n\ncountry_set = sorted(set(df['Actor1Geo']) | \nset(df['Actor2Geo']))\nfor ctry in country_set: \n    cnt = ctry_any_actor(ctry)\n    print('%2s: %5.2f' % (ctry, cnt * 100.0 / \n        total_articles))`,\n                },\n                {\n                    id: 2,\n                    name: 'Hello World',\n                    value: `def hello():\n    print('Hello World!')\n    \nhello()`,\n                },\n                {\n                    id: 3,\n                    name: 'My Team Is',\n                    value: `team = \"Team 4 - LAS 1\"\nprint(\"My team is \" + name)`,\n                },\n                {\n                    id: 4,\n                    name: 'Empty Script',\n                    value: '',\n                },\n            ],\n            selectedScriptIndex: 0,\n            showModal: false,\n            formValue: '',\n            copyStatus: 'Copy',\n        };\n        this.handleClick = this.handleClick.bind(this);\n        this.renderEditor = this.renderEditor.bind(this);\n        this.handleClose = this.handleClose.bind(this);\n        this.handleShow = this.handleShow.bind(this);\n        this.generateURL = this.generateURL.bind(this);\n        this.handleCopyURL = this.handleCopyURL.bind(this);\n        this.updateCopyStatus = this.updateCopyStatus.bind(this);\n        this.updateEditorValue = this.updateEditorValue.bind(this);\n    }\n\n    handleClose = () => this.setState({ showModal: false });\n    handleShow = () => this.setState({ showModal: true });\n\n    handleClick(e) {\n        let nodes = Array.prototype.slice.call(e.currentTarget.children);\n        let index = nodes.indexOf(e.target);\n        this.setState({ selectedScriptIndex: index });\n    }\n\n    renderEditor(selectedScript) {\n        return (\n            <Editor\n                className='editor'\n                editorValue={selectedScript.value}\n                updateEditorValue={this.updateEditorValue}\n            />\n        );\n    }\n\n    updateEditorValue(newValue) {\n        let scripts = [...this.state.scripts];\n        // 2. Make a shallow copy of the item you want to mutate\n        let script = {\n            ...scripts[this.state.selectedScriptIndex],\n            value: newValue,\n        };\n        scripts[this.state.selectedScriptIndex] = script;\n        this.setState({ scripts });\n    }\n\n    handleCopyURL() {\n        this.setState({ copyStatus: 'Copied!' });\n        navigator.clipboard.writeText(\n            `https://API/receive_data/${\n                this.state.scripts[this.state.selectedScriptIndex].id\n            }`\n        );\n    }\n\n    updateCopyStatus() {\n        this.setState({ copyStatus: 'Copy' });\n    }\n\n    // Runs after user submits form for creating new script and entering\n    // script name.\n    // Here we should call the create script api endpoint to send\n    // script name and get the new script id as well as the post url\n    generateURL(e) {\n        let newScript = {\n            id: Math.floor(Math.random() * Math.floor(50)),\n            name: this.state.formValue,\n            value: '',\n        };\n        const newScriptList = this.state.scripts.concat(newScript);\n        this.setState({ selectedScriptIndex: this.state.scripts.length });\n        this.setState({ scripts: newScriptList });\n        this.setState({ formValue: '' });\n        this.handleClose();\n    }\n\n    render() {\n        return (\n            <div className='scripts-page-container'>\n                <div className='editor-section'>\n                    <div className='headings'>\n                        <h5 className='label'>POST data to:</h5>\n                        <Form.Control\n                            className='url'\n                            type='text'\n                            value={`https://API/receive_data/${\n                                this.state.scripts[\n                                    this.state.selectedScriptIndex\n                                ].id\n                            }`}\n                            readOnly\n                        />\n                        <button\n                            className='copy-button'\n                            onClick={this.handleCopyURL}\n                            data-for='tooltip'\n                            data-tip\n                        >\n                            <IconContext.Provider\n                                value={{\n                                    style: {\n                                        fontSize: '1.5em',\n                                        color: 'black',\n                                    },\n                                }}\n                            >\n                                <AiFillCopy onClick={console.log('click')} />\n                            </IconContext.Provider>\n                        </button>\n                        <ReactTooltip\n                            id='tooltip'\n                            place='right'\n                            effect='solid'\n                            getContent={() => this.state.copyStatus}\n                            afterHide={this.updateCopyStatus}\n                        />\n                    </div>\n\n                    {this.renderEditor(\n                        this.state.scripts[this.state.selectedScriptIndex]\n                    )}\n                </div>\n\n                <div className='script-section'>\n                    <h4 className='headings'>Scripts</h4>\n                    <div className='list-and-buttons'>\n                        <ScriptList\n                            className='script-list'\n                            onScriptSelect={this.handleClick}\n                            scriptList={this.state.scripts}\n                            activeIndex={this.state.selectedScriptIndex}\n                        />\n                        <div className='script-list-buttons'>\n                            <Button\n                                className='create-button'\n                                variant='outline-primary'\n                                onClick={this.handleShow}\n                            >\n                                Create New Script\n                            </Button>\n                            <Button\n                                className='rename-button'\n                                variant='outline-primary'\n                            >\n                                Rename\n                            </Button>\n                        </div>\n                    </div>\n                </div>\n\n                <Modal\n                    show={this.state.showModal}\n                    onHide={this.handleClose}\n                    animation={true}\n                >\n                    <Modal.Header closeButton>\n                        <Modal.Title>Create New Script</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                        <Form>\n                            <Form.Group controlId='newScriptName'>\n                                <Form.Label>Script Name</Form.Label>\n                                <Form.Control\n                                    type='text'\n                                    placeholder='Enter new script name'\n                                    onChange={(e) =>\n                                        this.setState({\n                                            formValue: e.target.value,\n                                        })\n                                    }\n                                />\n                            </Form.Group>\n                        </Form>\n                    </Modal.Body>\n                    <Modal.Footer>\n                        <Button variant='secondary' onClick={this.handleClose}>\n                            Close\n                        </Button>\n                        <Button\n                            type='submit'\n                            variant='primary'\n                            onClick={this.generateURL}\n                        >\n                            Generate Unique POST URL\n                        </Button>\n                    </Modal.Footer>\n                </Modal>\n            </div>\n        );\n    }\n}\n\nexport default Scripts;\n"]},"metadata":{},"sourceType":"module"}